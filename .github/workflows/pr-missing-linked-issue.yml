name: PR Missing Linked Issue Reminder

on:
  pull_request:
    types: [opened, edited, reopened]

permissions:
  pull-requests: write
  issues: write
  
jobs:
  check-linked-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR body for linked issue
        uses: actions/github-script@v7
        with:
          script: |
            const body = context.payload.pull_request.body || "";
            const regex = /(Fixes|fixes)\s+#\d+/i;

            body: `Hi @${context.payload.pull_request.user.login}, this is **LinkBot** ðŸ‘‹

            Linking pull requests to issues helps us significantly with reviewing pull requests and keeping our repository healthy.

            ðŸš¨ **This pull request does not have an issue linked.**

            Please link an issue by updating the PR description using the following format:
            - Fixes #123

            Please link the relevant issue following this guide:
            ðŸ‘‰ docs/sdk_developers/how_to_link_issue.md

            If no issue exists yet, please create one and link it using the instructions here:
            ðŸ‘‰ docs/sdk_developers/creating_issues.md

            Thanks!` ;});
